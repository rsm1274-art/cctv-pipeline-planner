<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCTV Pipeline Inspection Business Guide</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- jsPDF for Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .mono {
            font-family: 'JetBrains Mono', monospace;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS (Inline SVGs to prevent React Error #130) ---
        const IconBase = ({ size = 24, className = "", children }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const BookOpen = (props) => (
            <IconBase {...props}>
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
            </IconBase>
        );

        const Gavel = (props) => (
            <IconBase {...props}>
                <path d="m14 13-7.5 7.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L11 10" />
                <path d="m16 16 6-6" />
                <path d="m8 8 6-6" />
                <path d="m9 7 8 8" />
                <path d="m21 11-8-8" />
            </IconBase>
        );

        const Briefcase = (props) => (
            <IconBase {...props}>
                <rect width="20" height="14" x="2" y="7" rx="2" ry="2" />
                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" />
            </IconBase>
        );

        const Building = (props) => (
            <IconBase {...props}>
                <rect x="4" y="2" width="16" height="20" rx="2" ry="2" />
                <line x1="9" y1="22" x2="9" y2="22.01" />
                <line x1="15" y1="22" x2="15" y2="22.01" />
                <line x1="12" y1="22" x2="12" y2="22.01" />
                <line x1="12" y1="2" x2="12" y2="22" />
                <line x1="4" y1="10" x2="20" y2="10" />
                <line x1="4" y1="14" x2="20" y2="14" />
                <line x1="4" y1="18" x2="20" y2="18" />
                <line x1="4" y1="6" x2="20" y2="6" />
            </IconBase>
        );

        const DollarSign = (props) => (
            <IconBase {...props}>
                <line x1="12" x2="12" y1="2" y2="22" />
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
            </IconBase>
        );

        const Wrench = (props) => (
            <IconBase {...props}>
                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" />
            </IconBase>
        );

        const Target = (props) => (
            <IconBase {...props}>
                <circle cx="12" cy="12" r="10" />
                <circle cx="12" cy="12" r="6" />
                <circle cx="12" cy="12" r="2" />
            </IconBase>
        );

        const ClipboardCheck = (props) => (
            <IconBase {...props}>
                <rect width="8" height="4" x="8" y="2" rx="1" ry="1" />
                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
                <path d="m9 14 2 2 4-4" />
            </IconBase>
        );

        const Download = (props) => (
            <IconBase {...props}>
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" x2="12" y1="15" y2="3" />
            </IconBase>
        );

        const Menu = (props) => (
            <IconBase {...props}>
                <line x1="4" x2="20" y1="12" y2="12" />
                <line x1="4" x2="20" y1="6" y2="6" />
                <line x1="4" x2="20" y1="18" y2="18" />
            </IconBase>
        );

        const X = (props) => (
            <IconBase {...props}>
                <path d="M18 6 6 18" />
                <path d="m6 6 18 18" />
            </IconBase>
        );

        const ExternalLink = (props) => (
            <IconBase {...props}>
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                <polyline points="15 3 21 3 21 9" />
                <line x1="10" x2="21" y1="14" y2="3" />
            </IconBase>
        );

        const BrainCircuit = (props) => (
            <IconBase {...props}>
                <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z" />
                <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z" />
            </IconBase>
        );

        // --- CONTENT DATA ---
        const sections = [
            {
                id: "intro",
                title: "Executive Intelligence",
                icon: <BookOpen size={20} />,
                content: (
                    <div className="space-y-4 text-gray-700">
                        <h2 className="text-2xl font-bold text-slate-800">1. Executive Intelligence and Market Architecture</h2>
                        <p>The establishment of a Closed-Circuit Television (CCTV) pipeline inspection service in Millington, Tennessee, represents a strategic entry into a critical infrastructure sector characterized by high technical barriers to entry and significant regulatory demand. The confluence of aging municipal infrastructure in the Memphis metropolitan area and stringent environmental compliance mandates creates a robust marketplace for qualified inspection vendors.</p>
                        <p>This guide provides an exhaustive analysis tailored to the regulatory environment of Shelby County. The overarching narrative is one of <strong>risk management</strong>. You are not merely selling video data; you are selling the assurance of compliance and the mitigation of environmental disaster.</p>
                        
                        <div className="bg-blue-50 border-l-4 border-blue-600 p-4 mt-4">
                            <h3 className="font-bold text-blue-900">The Millington Operational Theater</h3>
                            <p className="text-sm text-blue-800 mt-2">Millington offers a logistical advantage for serving Memphis and rural-industrial corridors. The market is segmented into three tiers:</p>
                            <ul className="list-disc list-inside text-sm text-blue-800 mt-2 ml-2">
                                <li><strong>Municipal Contracts:</strong> Preventative maintenance & emergency response.</li>
                                <li><strong>Commercial Construction:</strong> New build inspection & acceptance.</li>
                                <li><strong>Residential Services:</strong> Real estate transactions & lateral troubleshooting.</li>
                            </ul>
                        </div>
                    </div>
                )
            },
            {
                id: "legal",
                title: "Legal & Employment",
                icon: <Gavel size={20} />,
                content: (
                    <div className="space-y-4 text-gray-700">
                        <h2 className="text-2xl font-bold text-slate-800">2. Legal Landscape: Transition from Employment</h2>
                        <p>The primary hurdle involves legal restrictions from former employers. While there is legislative momentum toward banning non-competes (TN House Bill 1034/Senate Bill 995), a statutory ban is not yet active law as of late 2025.</p>
                        
                        <h3 className="text-xl font-semibold text-slate-800 mt-6">Enforceability in Tennessee</h3>
                        <p>Tennessee courts use a "reasonableness" standard. A non-compete is enforceable if the employer proves a "legitimate protectable business interest":</p>
                        <ul className="list-disc list-inside space-y-2 ml-4">
                            <li><strong>Specialized Training:</strong> Proprietary training vs. general skills. NASSCO certifications are often viewed as "portable" skills.</li>
                            <li><strong>Confidential Information:</strong> Knowledge of proprietary pricing models or bid estimation algorithms.</li>
                            <li><strong>Customer Relationships:</strong> If you were the "face" of the company to specific clients.</li>
                        </ul>

                        <div className="bg-yellow-50 border border-yellow-200 p-4 rounded-lg mt-4">
                            <strong className="text-yellow-800">Strategic Advice:</strong>
                            <p className="text-sm text-yellow-900 mt-1">Target market segments or geographic areas not heavily serviced by your former employer. E.g., if they focus on Memphis Municipal, focus on Millington Residential or Tipton County water districts.</p>
                        </div>
                    </div>
                )
            },
            {
                id: "entity",
                title: "Entity Structuring",
                icon: <Building size={20} />,
                content: (
                    <div className="space-y-4 text-gray-700">
                        <h2 className="text-2xl font-bold text-slate-800">3. Entity Structuring & Asset Protection</h2>
                        <p>Choosing your legal structure is the foundation of your risk management strategy. In the pipeline inspection industry, you are working around critical infrastructure. If your cutter robot accidentally pierces a gas line or causes a sewage backup into a home, the liability is massive.</p>
                        
                        <div className="grid grid-cols-1 gap-6 mt-6">
                            {/* Option 1: Sole Prop */}
                            <div className="bg-white p-5 border-l-4 border-red-500 shadow-sm rounded-r-lg">
                                <h3 className="text-lg font-bold text-slate-800">Option 1: Sole Proprietorship</h3>
                                <p className="text-sm text-slate-600 mt-2"><strong>The Default Option.</strong> This is what you are if you do nothing but start working.</p>
                                <ul className="mt-3 text-sm space-y-2 text-slate-700">
                                    <li className="flex items-start gap-2"><span className="text-red-500 font-bold">⚠ Risk:</span> You and the business are the same person legally. If the business is sued, they can take your personal home, car, and savings.</li>
                                    <li className="flex items-start gap-2"><span className="text-blue-500 font-bold">ℹ Verdict:</span> <span className="font-semibold">Highly discouraged</span> for this industry due to high liability exposure.</li>
                                </ul>
                            </div>

                            {/* Option 2: LLC */}
                            <div className="bg-white p-5 border-l-4 border-green-500 shadow-sm rounded-r-lg">
                                <h3 className="text-lg font-bold text-slate-800">Option 2: Limited Liability Company (LLC)</h3>
                                <p className="text-sm text-slate-600 mt-2"><strong>The Industry Standard.</strong> Creates a legal wall between your personal assets and business liabilities.</p>
                                <ul className="mt-3 text-sm space-y-2 text-slate-700">
                                    <li className="flex items-start gap-2"><span className="text-green-600 font-bold">✓ Benefit:</span> Protects personal assets. "Pass-through" taxation (profits are taxed on your personal return).</li>
                                    <li className="flex items-start gap-2"><span className="text-slate-900 font-bold">ℹ Note:</span> Requires an Operating Agreement (crucial if you ever add partners).</li>
                                </ul>
                            </div>

                            {/* Option 3: S-Corp */}
                            <div className="bg-white p-5 border-l-4 border-blue-500 shadow-sm rounded-r-lg">
                                <h3 className="text-lg font-bold text-slate-800">Option 3: S-Corp Election</h3>
                                <p className="text-sm text-slate-600 mt-2"><strong>The Tax Strategy.</strong> An LLC can request to be taxed as an S-Corp.</p>
                                <ul className="mt-3 text-sm space-y-2 text-slate-700">
                                    <li className="flex items-start gap-2"><span className="text-blue-600 font-bold">✓ Benefit:</span> Can save on Self-Employment Tax (15.3%) once your net profit exceeds ~$60,000–$80,000/year.</li>
                                    <li className="flex items-start gap-2"><span className="text-amber-600 font-bold">⚠ Complexity:</span> Requires running formal payroll for yourself (W-2). Usually a "Year 2 or Year 3" move.</li>
                                </ul>
                            </div>
                        </div>

                        <div className="mt-8 bg-slate-100 p-5 rounded-lg border border-slate-200">
                            <h3 className="font-bold text-slate-800 flex items-center gap-2">
                                <span className="text-red-600">⚠</span> The Tennessee Trap: Franchise & Excise Tax
                            </h3>
                            <p className="text-sm text-slate-700 mt-2">
                                Unlike many states, Tennessee charges LLCs and Corporations a <strong>Franchise & Excise (F&E) Tax</strong>. 
                                Even if you lose money, you may still owe the minimum ($100).
                            </p>
                            <ul className="list-disc list-inside text-sm text-slate-700 mt-2 ml-2">
                                <li><strong>Excise Tax:</strong> ~6.5% on net earnings.</li>
                                <li><strong>Franchise Tax:</strong> Based on the greater of net worth or real/tangible property in TN.</li>
                                <li><strong>Annual Report:</strong> You must file an Annual Report with the Secretary of State (~$300 fee for typical LLCs).</li>
                            </ul>
                        </div>
                    </div>
                )
            },
            {
                id: "licensing",
                title: "Licensing & Compliance",
                icon: <Briefcase size={20} />,
                content: (
                    <div className="space-y-4 text-gray-700">
                        <h2 className="text-2xl font-bold text-slate-800">4. Licensing & Regulatory Compliance</h2>
                        
                        <h3 className="text-lg font-semibold text-slate-800">Business Licensing</h3>
                        <ul className="list-disc list-inside space-y-2 ml-4">
                            <li><strong>Shelby County:</strong> Businesses with gross receipts over $3,000 must register.</li>
                            <li><strong>Standard License:</strong> Mandatory for receipts >$100,000. You will likely cross this threshold in Year 1.</li>
                            <li><strong>Filings:</strong> Application with Shelby County Clerk ($15 fee) and annual returns with TN Dept of Revenue.</li>
                        </ul>

                        <h3 className="text-lg font-semibold text-slate-800 mt-6">Contractor Licensing (Crucial)</h3>
                        <p>The TN Board for Licensing Contractors mandates credentials for projects >$25,000. CCTV work often falls under <strong>Municipal and Utility Construction (MU)</strong>.</p>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                            <div className="bg-white p-4 border rounded shadow-sm">
                                <h4 className="font-bold text-slate-700">Requirements</h4>
                                <ul className="text-sm mt-2 space-y-1">
                                    <li>• Pass "Business and Law" exam</li>
                                    <li>• Pass specific trade exam</li>
                                    <li>• Financial statement (Reviewed or Audited)</li>
                                </ul>
                            </div>
                            <div className="bg-white p-4 border rounded shadow-sm">
                                <h4 className="font-bold text-slate-700">The $25k Limit</h4>
                                <p className="text-sm mt-2">Without an MU license, you cannot bid on prime contracts over $25,000, significantly capping revenue potential.</p>
                            </div>
                        </div>
                    </div>
                )
            },
            {
                id: "finance",
                title: "Financial Engineering",
                icon: <DollarSign size={20} />,
                content: (
                    <div className="space-y-4 text-gray-700">
                        <h2 className="text-2xl font-bold text-slate-800">5. Financial Engineering</h2>
                        <p>Profitability depends on the "utilization rate"—billable feet per day vs. fixed costs.</p>

                        <h3 className="text-lg font-semibold text-slate-800 mt-4">Startup Capital Tiers</h3>
                        <div className="overflow-x-auto">
                            <table className="min-w-full text-sm text-left">
                                <thead className="bg-slate-100 uppercase font-bold text-slate-600">
                                    <tr>
                                        <th className="px-4 py-2">Tier</th>
                                        <th className="px-4 py-2">Focus</th>
                                        <th className="px-4 py-2">Equipment</th>
                                        <th className="px-4 py-2">Est. Cost</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-200">
                                    <tr>
                                        <td className="px-4 py-2 font-semibold">Tier 1</td>
                                        <td className="px-4 py-2">Residential/Lateral</td>
                                        <td className="px-4 py-2">Push Camera, Van</td>
                                        <td className="px-4 py-2">$20k - $30k</td>
                                    </tr>
                                    <tr>
                                        <td className="px-4 py-2 font-semibold">Tier 2</td>
                                        <td className="px-4 py-2">Municipal Mainline</td>
                                        <td className="px-4 py-2">Crawler (ROVVER X), Box Truck, WinCan</td>
                                        <td className="px-4 py-2">$120k - $250k</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h3 className="text-lg font-semibold text-slate-800 mt-6">First-Year Monthly Budget Model</h3>
                        <div className="bg-white border rounded-lg overflow-hidden shadow-sm">
                            <table className="min-w-full text-sm">
                                <thead className="bg-slate-800 text-white">
                                    <tr>
                                        <th className="px-4 py-3 text-left">Category</th>
                                        <th className="px-4 py-3 text-left">Item</th>
                                        <th className="px-4 py-3 text-right">Monthly Cost</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-100">
                                    <tr>
                                        <td className="px-4 py-2 font-medium">Fixed</td>
                                        <td className="px-4 py-2">Financing ($100k rig)</td>
                                        <td className="px-4 py-2 text-right">$2,027</td>
                                    </tr>
                                    <tr>
                                        <td className="px-4 py-2 font-medium">Fixed</td>
                                        <td className="px-4 py-2">Insurance (GL, Auto, Inland Marine)</td>
                                        <td className="px-4 py-2 text-right">~$800</td>
                                    </tr>
                                    <tr>
                                        <td className="px-4 py-2 font-medium">Fixed</td>
                                        <td className="px-4 py-2">Storage/Office/Licensing</td>
                                        <td className="px-4 py-2 text-right">$450</td>
                                    </tr>
                                    <tr>
                                        <td className="px-4 py-2 font-medium text-amber-600">Variable</td>
                                        <td className="px-4 py-2">Fuel (Truck & Gen - 12 days)</td>
                                        <td className="px-4 py-2 text-right">$1,440</td>
                                    </tr>
                                    <tr>
                                        <td className="px-4 py-2 font-medium text-amber-600">Variable</td>
                                        <td className="px-4 py-2">Maintenance Fund</td>
                                        <td className="px-4 py-2 text-right">$400</td>
                                    </tr>
                                    <tr className="bg-slate-50 font-bold">
                                        <td className="px-4 py-2">Total</td>
                                        <td className="px-4 py-2">Break Even Point</td>
                                        <td className="px-4 py-2 text-right">~$5,100/mo</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                )
            },
            {
                id: "technical",
                title: "Technical Strategy",
                icon: <Wrench size={20} />,
                content: (
                    <div className="space-y-4 text-gray-700">
                        <h2 className="text-2xl font-bold text-slate-800">6. Technical Strategy & Maintenance</h2>
                        <p>In this industry, equipment reliability is the primary determinant of profitability. A broken cable means zero revenue.</p>
                        
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                            <div className="bg-white p-4 rounded border-t-4 border-red-500 shadow-sm">
                                <h4 className="font-bold text-slate-800">Daily Pressurization</h4>
                                <p className="text-sm mt-2">Cameras must be pressurized with dry nitrogen daily. Positive pressure ensures nitrogen leaks out rather than water leaking in.</p>
                            </div>
                            <div className="bg-white p-4 rounded border-t-4 border-amber-500 shadow-sm">
                                <h4 className="font-bold text-slate-800">Cable Re-termination</h4>
                                <p className="text-sm mt-2">The tether cable is the system's weak point. You <strong>must</strong> learn to solder and re-terminate cables in the field to avoid 3-5 days of downtime.</p>
                            </div>
                            <div className="bg-white p-4 rounded border-t-4 border-green-500 shadow-sm">
                                <h4 className="font-bold text-slate-800">NASSCO PACP</h4>
                                <p className="text-sm mt-2">Certifications must be current (Ver 7+). Without PACP compliance, data is useless to municipal engineers.</p>
                            </div>
                        </div>

                        <h3 className="text-lg font-semibold text-slate-800 mt-6">Software & Data</h3>
                        <p><strong>WinCan VX</strong> or <strong>ITpipes</strong> are industry standards. Budget for annual maintenance fees (~$1,500) and significant cloud storage for massive video files.</p>
                    </div>
                )
            },
            {
                id: "market",
                title: "Market & Procurement",
                icon: <Target size={20} />,
                content: (
                    <div className="space-y-4 text-gray-700">
                        <h2 className="text-2xl font-bold text-slate-800">7. Market Strategy</h2>
                        <p>Navigating procurement in West TN requires registration and relationships.</p>

                        <h3 className="text-lg font-semibold text-slate-800">Where to Find Work</h3>
                        <ul className="list-disc list-inside space-y-2 ml-4">
                            <li><strong>City of Memphis:</strong> Uses Oracle iProcurement and Beacon.</li>
                            <li><strong>Shelby County:</strong> Uses Vendor Self Service (VSS). Requires EOC number.</li>
                            <li><strong>State of TN:</strong> GO-BID system.</li>
                            <li><strong>Smaller Towns (Bartlett, Dyersburg):</strong> Check websites or OpenGov.</li>
                        </ul>

                        <h3 className="text-lg font-semibold text-slate-800 mt-4">Entry Strategies</h3>
                        <ol className="list-decimal list-inside space-y-2 ml-4">
                            <li><strong>Subcontracting:</strong> Large primes often have 20-25% minority/small business participation goals.</li>
                            <li><strong>Under Threshold Work:</strong> Target discretionary spending (under $25k) by building relationships with Public Works Directors.</li>
                            <li><strong>Bid Analysis:</strong> Study past tabulations. Avoid bidding too low ($1.50/ft) or too high ($3.50/ft).</li>
                        </ol>
                    </div>
                )
            },
            {
                id: "assessment",
                title: "Interactive Workbook",
                icon: <ClipboardCheck size={20} />,
                content: null // Handled specifically by the Interactive Component
            },
            {
                id: "resources",
                title: "References & Resources",
                icon: <ExternalLink size={20} />,
                content: (
                    <div className="space-y-4 text-gray-700">
                        <h2 className="text-2xl font-bold text-slate-800">References & Official Resources</h2>
                        <div className="grid grid-cols-1 gap-4">
                            <a href="https://sos.tn.gov/" target="_blank" className="block p-4 bg-white border rounded hover:border-blue-500 transition">
                                <h4 className="font-bold text-blue-600 flex items-center gap-2">Tennessee Secretary of State <ExternalLink size={14}/></h4>
                                <p className="text-sm">For business registration and finding specific legislative bills (HB 1034 / SB 995).</p>
                            </a>
                            <a href="https://www.tn.gov/commerce/regboards/contractors.html" target="_blank" className="block p-4 bg-white border rounded hover:border-blue-500 transition">
                                <h4 className="font-bold text-blue-600 flex items-center gap-2">TN Board for Licensing Contractors <ExternalLink size={14}/></h4>
                                <p className="text-sm">Official source for MU (Municipal Utility) license requirements and exams.</p>
                            </a>
                            <a href="https://www.shelbycountytn.gov/398/Business-Tax-License" target="_blank" className="block p-4 bg-white border rounded hover:border-blue-500 transition">
                                <h4 className="font-bold text-blue-600 flex items-center gap-2">Shelby County Clerk <ExternalLink size={14}/></h4>
                                <p className="text-sm">Business license applications and tax information.</p>
                            </a>
                            <a href="https://www.nassco.org/" target="_blank" className="block p-4 bg-white border rounded hover:border-blue-500 transition">
                                <h4 className="font-bold text-blue-600 flex items-center gap-2">NASSCO <ExternalLink size={14}/></h4>
                                <p className="text-sm">Pipeline Assessment Certification Program (PACP) standards and training.</p>
                            </a>
                            <a href="https://www.memphistn.gov/business/doing-business-with-the-city/" target="_blank" className="block p-4 bg-white border rounded hover:border-blue-500 transition">
                                <h4 className="font-bold text-blue-600 flex items-center gap-2">City of Memphis Procurement <ExternalLink size={14}/></h4>
                                <p className="text-sm">Vendor registration and bid listings.</p>
                            </a>
                        </div>
                    </div>
                )
            }
        ];

        // --- PDF GENERATION LOGIC ---
        const generatePDF = (answers) => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const pageWidth = doc.internal.pageSize.getWidth();
            const margin = 20;
            const maxLineWidth = pageWidth - (margin * 2);
            let yPos = 20;

            // Title
            doc.setFontSize(22);
            doc.setFont("helvetica", "bold");
            doc.text("CCTV Business Strategic Plan", margin, yPos);
            yPos += 15;
            
            doc.setFontSize(12);
            doc.setFont("helvetica", "normal");
            doc.text(`Generated: ${new Date().toLocaleDateString()}`, margin, yPos);
            yPos += 20;

            const addSection = (title, content) => {
                // Check for page break
                if (yPos > 250) {
                    doc.addPage();
                    yPos = 20;
                }

                doc.setFontSize(14);
                doc.setFont("helvetica", "bold");
                doc.setTextColor(40, 40, 40);
                doc.text(title, margin, yPos);
                yPos += 10;

                doc.setFontSize(11);
                doc.setFont("helvetica", "normal");
                doc.setTextColor(60, 60, 60);
                
                const splitText = doc.splitTextToSize(content || "No answer provided.", maxLineWidth);
                doc.text(splitText, margin, yPos);
                yPos += (splitText.length * 6) + 10; 
            };

            // 1. Initial Knowledge
            addSection("1. Initial Knowledge Baseline", answers.initialKnowledge);
            addSection("2. Knowledge Gaps Identified", answers.knowledgeGaps);

            // 2. Entity Selection
            addSection("3. Entity Selection Rationale", answers.q_entity);

            // 3. Technical Autonomy
            addSection("4. Technical Autonomy Assessment", answers.q_technical);

            // 4. Sales Physiology
            addSection("5. Sales & Networking Strategy", answers.q_sales);

            // 5. Financial Resilience
            addSection("6. Financial Resilience Plan", answers.q_finance);

            // 6. Scope Definition
            addSection("7. Scope Definition (Cleaning vs. Inspecting)", answers.q_scope);

            doc.save("CCTV_Business_Plan_Workbook.pdf");
        };

        // --- COMPONENTS ---

        const Sidebar = ({ activeSection, setActiveSection, isOpen, toggleSidebar }) => (
            <div className={`fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-slate-300 transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0 md:static md:inset-0`}>
                <div className="flex items-center justify-between p-4 border-b border-slate-700">
                    <h1 className="text-xl font-bold text-white tracking-wider">PIPELINE<span className="text-blue-500">PRO</span></h1>
                    <button onClick={toggleSidebar} className="md:hidden text-white">
                        <X size={24} />
                    </button>
                </div>
                <nav className="p-4 space-y-2">
                    {sections.map(section => (
                        <button
                            key={section.id}
                            onClick={() => {
                                setActiveSection(section.id);
                                if(window.innerWidth < 768) toggleSidebar();
                            }}
                            className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${activeSection === section.id ? 'bg-blue-600 text-white shadow-lg' : 'hover:bg-slate-800'}`}
                        >
                            {section.icon}
                            <span className="text-sm font-medium">{section.title}</span>
                        </button>
                    ))}
                </nav>
                <div className="absolute bottom-0 w-full p-4 border-t border-slate-800">
                    <div className="text-xs text-slate-500 text-center">
                        Strategic Guide for<br/>West Tennessee Market
                    </div>
                </div>
            </div>
        );

        const InteractiveAssessment = ({ answers, setAnswers }) => {
            const handleChange = (e) => {
                setAnswers({ ...answers, [e.target.name]: e.target.value });
            };

            return (
                <div className="space-y-8 animate-fade-in">
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <div className="flex items-center gap-3 mb-4">
                            <div className="p-2 bg-purple-100 text-purple-600 rounded-lg">
                                <BrainCircuit size={24} />
                            </div>
                            <h2 className="text-xl font-bold text-slate-800">Phase 0: Knowledge Baseline</h2>
                        </div>
                        <p className="text-sm text-slate-600 mb-4">Before starting your research, document what you <em>think</em> you know. Compare this later to what you learn.</p>
                        
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-1">What do I currently know about the business requirements?</label>
                                <textarea 
                                    name="initialKnowledge"
                                    value={answers.initialKnowledge || ''}
                                    onChange={handleChange}
                                    className="w-full h-32 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
                                    placeholder="E.g., I know I need a truck and a camera, but I'm unsure about tax licenses..."
                                ></textarea>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-1">What did I learn during this research that I missed?</label>
                                <textarea 
                                    name="knowledgeGaps"
                                    value={answers.knowledgeGaps || ''}
                                    onChange={handleChange}
                                    className="w-full h-32 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
                                    placeholder="Reflect here as you read the guide..."
                                ></textarea>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <div className="flex items-center gap-3 mb-4">
                            <div className="p-2 bg-blue-100 text-blue-600 rounded-lg">
                                <ClipboardCheck size={24} />
                            </div>
                            <h2 className="text-xl font-bold text-slate-800">Critical Planning Questions</h2>
                        </div>
                        
                        <div className="space-y-6">
                            <div className="bg-slate-50 p-4 rounded-lg">
                                <label className="block font-semibold text-slate-800 mb-2">1. Entity Selection Rationale</label>
                                <p className="text-xs text-slate-500 mb-2 italic">Based on the risks (liability) and costs (TN F&E Tax), which entity structure are you leaning towards and why?</p>
                                <textarea 
                                    name="q_entity"
                                    value={answers.q_entity || ''}
                                    onChange={handleChange}
                                    className="w-full h-24 p-3 border border-slate-300 rounded bg-white focus:ring-2 focus:ring-blue-500 text-sm"
                                ></textarea>
                            </div>

                            <div className="bg-slate-50 p-4 rounded-lg">
                                <label className="block font-semibold text-slate-800 mb-2">2. Technical Autonomy</label>
                                <p className="text-xs text-slate-500 mb-2 italic">Can I repair my own equipment? If a cable breaks at 10:00 AM, do I have the skills/tools to fix it?</p>
                                <textarea 
                                    name="q_technical"
                                    value={answers.q_technical || ''}
                                    onChange={handleChange}
                                    className="w-full h-24 p-3 border border-slate-300 rounded bg-white focus:ring-2 focus:ring-blue-500 text-sm"
                                ></textarea>
                            </div>

                            <div className="bg-slate-50 p-4 rounded-lg">
                                <label className="block font-semibold text-slate-800 mb-2">3. Sales Physiology</label>
                                <p className="text-xs text-slate-500 mb-2 italic">Can I sell? Am I ready to walk into City Halls and attend pre-bid meetings?</p>
                                <textarea 
                                    name="q_sales"
                                    value={answers.q_sales || ''}
                                    onChange={handleChange}
                                    className="w-full h-24 p-3 border border-slate-300 rounded bg-white focus:ring-2 focus:ring-blue-500 text-sm"
                                ></textarea>
                            </div>

                            <div className="bg-slate-50 p-4 rounded-lg">
                                <label className="block font-semibold text-slate-800 mb-2">4. Financial Resilience</label>
                                <p className="text-xs text-slate-500 mb-2 italic">Municipalities pay slowly (Net 30/60). Can I float fuel/insurance for 3 months?</p>
                                <textarea 
                                    name="q_finance"
                                    value={answers.q_finance || ''}
                                    onChange={handleChange}
                                    className="w-full h-24 p-3 border border-slate-300 rounded bg-white focus:ring-2 focus:ring-blue-500 text-sm"
                                ></textarea>
                            </div>

                            <div className="bg-slate-50 p-4 rounded-lg">
                                <label className="block font-semibold text-slate-800 mb-2">5. Scope Definition</label>
                                <p className="text-xs text-slate-500 mb-2 italic">Am I an Inspection Company or a Cleaning Company? (Cleaning requires water permits, jetter trucks).</p>
                                <textarea 
                                    name="q_scope"
                                    value={answers.q_scope || ''}
                                    onChange={handleChange}
                                    className="w-full h-24 p-3 border border-slate-300 rounded bg-white focus:ring-2 focus:ring-blue-500 text-sm"
                                ></textarea>
                            </div>
                        </div>

                        <div className="mt-8 flex justify-end">
                            <button 
                                onClick={() => generatePDF(answers)}
                                className="flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors shadow-lg"
                            >
                                <Download size={20} />
                                Export Workbook to PDF
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeSection, setActiveSection] = useState('intro');
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [answers, setAnswers] = useState({});

            const currentSectionData = sections.find(s => s.id === activeSection);

            return (
                <div className="flex h-screen overflow-hidden">
                    <Sidebar 
                        activeSection={activeSection} 
                        setActiveSection={setActiveSection}
                        isOpen={mobileMenuOpen}
                        toggleSidebar={() => setMobileMenuOpen(!mobileMenuOpen)}
                    />

                    <div className="flex-1 flex flex-col h-full overflow-hidden relative">
                        {/* Mobile Header */}
                        <div className="md:hidden bg-white border-b border-slate-200 p-4 flex items-center justify-between">
                            <span className="font-bold text-slate-800">{currentSectionData?.title}</span>
                            <button onClick={() => setMobileMenuOpen(true)} className="text-slate-600">
                                <Menu size={24} />
                            </button>
                        </div>

                        {/* Main Content Area */}
                        <main className="flex-1 overflow-y-auto p-4 md:p-8 bg-slate-50">
                            <div className="max-w-4xl mx-auto">
                                <div className="mb-6 flex items-center gap-4">
                                    <div className="p-3 bg-white shadow-sm rounded-lg text-blue-600 hidden md:block">
                                        {currentSectionData?.icon}
                                    </div>
                                    <div>
                                        <h1 className="text-3xl font-bold text-slate-900">{currentSectionData?.title}</h1>
                                        <p className="text-slate-500 text-sm mt-1">CCTV Inspection Business Guide • Millington, TN</p>
                                    </div>
                                </div>

                                <div className="bg-white p-6 md:p-10 rounded-xl shadow-sm border border-slate-200 min-h-[500px]">
                                    {activeSection === 'assessment' ? (
                                        <InteractiveAssessment answers={answers} setAnswers={setAnswers} />
                                    ) : (
                                        <div className="prose prose-slate max-w-none">
                                            {currentSectionData?.content}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>